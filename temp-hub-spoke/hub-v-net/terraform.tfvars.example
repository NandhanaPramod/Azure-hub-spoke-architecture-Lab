location = "eastus"
environment = "dev"
basename = "hub"
vnet_cidr = ["10.0.0.0/16"]

subnets = [
  {
    name = "gateway"
    address_prefixes = ["10.0.0.0/24"]
    nsg_name = "gateway-nsg"
    service_endpoints = []
  },
  {
    name = "firewall"
    address_prefixes = ["10.0.1.0/24"]
    nsg_name = "firewall-nsg"
    service_endpoints = []
  },
  {
    name = "bastion"
    address_prefixes = ["10.0.2.0/24"]
    nsg_name = "bastion-nsg"
    service_endpoints = []
  },
  {
    name = "shared"
    address_prefixes = ["10.0.3.0/24"]
    nsg_name = "shared-nsg"
    service_endpoints = ["Microsoft.KeyVault", "Microsoft.Storage", "Microsoft.ContainerRegistry"]
  }
]

security_rules = [
  {
    name                       = "gateway-nsg"
    priority                   = 100
    direction                  = "Inbound"
    access                     = "Allow"
    protocol                   = "Tcp"
    source_port_range          = "*"
    destination_port_range     = "443"
    source_address_prefix      = "*"
    destination_address_prefix = "*"
  }
]

security_group = [
  {
    name = "gateway-nsg"
  },
  {
    name = "firewall-nsg"
  },
  {
    name = "bastion-nsg"
  },
  {
    name = "shared-nsg"
  }
]

firewall_policy = {
  name = "hub-firewall-policy"
  sku  = "Premium"
  threat_intel_mode = "Alert"
  dns_servers = ["168.63.129.16"]
}

bastion_config = {
  name = "hub-bastion"
}

vpn_gateway_config = {
  name = "hub-vpn-gateway"
  type = "Vpn"
  sku  = "VpnGw1"
}

private_dns_zones = [
  "privatelink.vaultcore.azure.net",
  "privatelink.blob.core.windows.net",
  "privatelink.azurecr.io"
]

key_vault_config = {
  name                        = "hub-kv"
  enabled_for_disk_encryption = true
  purge_protection_enabled    = false
  sku                        = "standard"
}

container_registry_config = {
  name = "hubacr"
  sku  = "Standard"
}

storage_account_config = {
  name                     = "hubstorage"
  account_tier             = "Standard"
  account_replication_type = "LRS"
}

log_analytics_config = {
  name             = "hub-log-analytics"
  sku              = "PerGB2018"
  retention_in_days = 30
}

create_resource_group = true
resource_group_name   = ""

default_tags = {
  Project     = "Hub-Spoke"
  ManagedBy   = "Terraform"
  Environment = "Development"
}

subscription_id = "your-subscription-id" 